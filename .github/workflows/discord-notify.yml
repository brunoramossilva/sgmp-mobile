name: Discord Notifications

on:
  pull_request:
    types: [opened, reopened, closed]
  push:
    branches:
      - develop
      - main
  create:
    branches:
      - "*"

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Notification
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK_URL }}
        with:
          args: |
            ğŸš€ **GitHub Notification**

            ğŸ§© **RepositÃ³rio:** [${{ github.repository }}](https://github.com/${{ github.repository }})
            ğŸ‘¤ **UsuÃ¡rio:** @${{ github.actor }}
            âš™ï¸ **Evento:** ${{ github.event_name }}
            ğŸŒ¿ **Branch:** ${{ github.ref_name || github.head_ref }}

            ${{ github.event_name == 'pull_request' && format('ğŸ“¥ **Pull Request:** [{0}]({1})', github.event.pull_request.title, github.event.pull_request.html_url) || '' }}
            ${{ github.event_name == 'push' && format('ğŸ§¾ **Push realizado!** Veja os commits [aqui]({0}/compare/{1})', format('https://github.com/{0}', github.repository), github.ref_name) || '' }}
            ${{ github.event_name == 'create' && format('âœ¨ **Nova branch criada:** `{0}`', github.ref_name) || '' }}
