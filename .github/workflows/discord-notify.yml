name: Discord Notifications

on:
  pull_request:
    types: [opened, reopened, closed]
  push:
    branches:
      - develop
      - main
  create:
    branches:
      - "*"

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Notification
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK_URL }}
        with:
          args: |
            🚀 **GitHub Notification**

            🧩 **Repositório:** [${{ github.repository }}](https://github.com/${{ github.repository }})
            👤 **Usuário:** @${{ github.actor }}
            ⚙️ **Evento:** ${{ github.event_name }}
            🌿 **Branch:** ${{ github.ref_name || github.head_ref }}

            ${{ github.event_name == 'pull_request' && format('📥 **Pull Request:** [{0}]({1})', github.event.pull_request.title, github.event.pull_request.html_url) || '' }}
            ${{ github.event_name == 'push' && format('🧾 **Push realizado!** Veja os commits [aqui]({0}/compare/{1})', format('https://github.com/{0}', github.repository), github.ref_name) || '' }}
            ${{ github.event_name == 'create' && format('✨ **Nova branch criada:** `{0}`', github.ref_name) || '' }}
